local Tar = "nill"
local TarDistance = 0
local TarPos = false

local TargetDistance = 50

local KillAura = false
local HitSpeed = 500

-- targetFunction
function GetTargetFunc()
    spawn(function()
        local Players = game:GetService("Players")
        local Player = Players.LocalPlayer

        local WorkSpace = game:GetService("Workspace")
        if WorkSpace:FindFirstChild(Player.Name) then
            local PlayerW = WorkSpace:FindFirstChild(Player.Name)
            local PlayerTable = {}
            for i, v in pairs(Players:GetChildren()) do
                local PlayerName = v.Name
                local PlayerLoopW = WorkSpace:FindFirstChild(v.Name)
                if PlayerLoopW then
                    if PlayerLoopW:FindFirstChild("HumanoidRootPart") then
                        if Player.Name == v.Name then
                        else
                           PlayerTable[PlayerName] = PlayerLoopW.HumanoidRootPart.Position
                        end
                    end
                end
            end
            local Close = "nill"
            local CloseDistance = TargetDistance
            local ClosePos = false
            for i, v in pairs(PlayerTable) do
                local TXPos = v.X
                local TYPos = v.Y
                local TZPos = v.Z

                local playerXPos = PlayerW.HumanoidRootPart.Position.X
                local playerYPos = PlayerW.HumanoidRootPart.Position.Y
                local playerZPos = PlayerW.HumanoidRootPart.Position.Z

                local XDistance = math.abs(TXPos-playerXPos)
                local YDistance = math.abs(TYPos-playerYPos)
                local ZDistance = math.abs(TZPos-playerZPos)

                local Distance = ((XDistance^2)+(YDistance^2)+(ZDistance^2))^0.5
                if CloseDistance > Distance then
                    CloseDistance = Distance
                    Close = i
                    ClosePos = v
                end
            end
            Tar = Close
            TarDistance = CloseDistance
            TarPos = ClosePos
            print(Tar)
        end
    end)
end

--KillAura Func
function KillAuraFunc()
    spawn(function()
        while KillAura do

            if Tar == "nill" then
                GetTargetFunc()
            else
                local Players = game:GetService("Players")
                if Players:FindFirstChild(Tar) then
                    local TargetPos = Players:FindFirstChild(Tar).Character.HumanoidRootPart.Position
                    local TXPos = TargetPos.X
                    local TYPos = TargetPos.Y
                    local TZPos = TargetPos.Z

                    local playerXPos = TarPos.X
                    local playerYPos = TarPos.Y
                    local playerZPos = TarPos.Z

                    local XDistance = math.abs(TXPos-playerXPos)
                    local YDistance = math.abs(TYPos-playerYPos)
                    local ZDistance = math.abs(TZPos-playerZPos)

                    local Distance = ((XDistance^2)+(YDistance^2)+(ZDistance^2))^0.5
                    if Distance > TargetDistance then
                        Tar = "nill"
                    end
                else
                    Tar = "nill"
                end
                wait(HitSpeed/1000)
                local args = {
                    [1] = game:GetService("Players"):FindFirstChild(Tar).Character
                }
                
                game:GetService("ReplicatedStorage").GameRemotes.Attack:InvokeServer(unpack(args))
            end
        end
    end)
end


-----------------------------------------------------------------------------------------------------------------
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()

local Window = Library.CreateLib("Miners Cave v2", "Synapse")

local CombadTab = Window:NewTab("Combad")

local TargetSection = CombadTab:NewSection("Target")

local targetLabel = TargetSection:NewLabel("Currend Target > "..Tar)
--targetLabel:UpdateLabel("Currend Target > "..Tar)

TargetSection:NewToggle("ToggleText", "ToggleInfo", function(state)
    KillAura = state
    KillAuraFunc()
end)

TargetSection:NewSlider("SliderText", "SliderInfo", 1000, 0, function(s) -- 500 (MaxValue) | 0 (MinValue)
    HitSpeed = s
end)